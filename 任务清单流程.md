# goenum 使用任务清单流程

本清单根据 `README.md` 的内容生成，旨在帮助您一步步地正确使用 `goenum` 工具来生成功能丰富的枚举类型。

## 第一步：准备工作

- [ ] 确保 `goenum` 生成器工具已经安装或在您的项目环境中可用。
- [ ] 在将要定义枚举的 Go 文件中，准备导入本项目下的 `enums` 包，因为生成的代码会依赖它。

## 第二步：定义基础枚举

- [ ] 选择一个 Go 文件（例如 `my_enums.go`）。
- [ ] 使用 `type <YourEnumName> <underlying_type>` 的形式定义一个新的整数（或兼容）类型。例如：`type OrderStatus int`。
- [ ] 在 `const (...)` 块中定义具体的枚举成员及其对应的整数值。

## 第三步：添加生成器指令

这是最关键的一步，通过它来告诉 `goenum` 要生成哪些功能。

- [ ] 在 `type` 定义的正上方，添加一行 `// goenums: [options]` 格式的注释。
- [ ] 根据您的需求，从下方选择一个或多个指令标志，并将其填入 `[options]` 位置，用空格隔开。

### 功能选项清单

- **序列化/反序列化**
    - [ ] `-sql`: 添加数据库支持，生成 `Scan()` 和 `Value()` 方法。
    - [ ] `-json`: 添加 JSON 支持，生成 `MarshalJSON()` 和 `UnmarshalJSON()` 方法。
    - [ ] `-yaml`: 添加 YAML 支持，生成 `MarshalYAML()` 和 `UnmarshalYAML()` 方法。
    - [ ] `-text`: 添加文本支持，生成 `MarshalText()` 和 `UnmarshalText()` 方法。
    - [ ] `-binary`: 添加二进制支持，生成 `MarshalBinary()` 和 `UnmarshalBinary()` 方法。

- **序列化格式控制**
    - [ ] `-serde/name`: 将默认序列化行为设置为使用枚举的**名称**（字符串）。
    - [ ] `-serde/value`: 将默认序列化行为设置为使用枚举的**原始值**（整数）。
    - (注意: `-serde/name` 和 `-serde/value` 通常只选择一个)

- **高级功能**
    - [ ] `-statemachine`: 启用状态机功能，会根据注释生成状态转换逻辑。
    - [ ] `-genName`: （根据 README 推断）用于生成名称相关的辅助方法。

**示例:**
```go
// goenums: -sql -json -serde/name -statemachine
type OrderStatus int
```

## 第四步：（可选）为枚举成员添加详细配置

通过在 `const` 块中为每个成员添加特定格式的注释，可以实现更高级的功能。

- [ ] **定义别名**: 如果一个成员需要多个名称，使用 `// name1, name2`。
- [ ] **标记无效值**: 对于零值或无效状态，使用 `// invalid` 注释，这将影响 `IsValid()` 方法的返回值。
- [ ] **定义状态转换** (需要已启用 `-statemachine`):
    - [ ] 使用 `// state: -> StateA, StateB` 来定义当前状态可以转移到的目标状态。
    - [ ] 使用 `// state: [final]` 来标记一个状态是终结状态，不能再进行转换。
- [ ] **为成员分组 (打标签)**:
    - [ ] 使用 `// tag: group1, group2` 来为成员分组。
    - [ ] 工具会自动生成 `IsGroup1()`、`Group1Slice()` 等方便的辅助方法。

**示例:**
```go
const (
    // invalid
    Pending OrderStatus = 0

    // state: -> Processing, Cancelled
    // tag: active
    Submitted OrderStatus = 1

    // state: [final]
    // tag: terminal
    Cancelled OrderStatus = 2
)
```

## 第五步：执行生成

- [ ] 运行 `goenum` 工具（具体命令取决于您的项目配置，例如 `go generate` 或直接调用二进制文件）。
- [ ] 工具会扫描您的源文件，寻找 `// goenums:` 指令。

## 第六步：验证与使用

- [ ] 检查与源文件同目录下是否生成了名为 `<source_filename>_enums.go` 的新文件。
- [ ] 打开生成的文件，确认其中包含了您所期望的结构体、方法和接口实现。
- [ ] 在您的业务代码中，开始使用新生成的枚举类型及其提供的方法，例如 `OrderStatuses.Submitted.CanTransitionTo(OrderStatuses.Processing)`。
